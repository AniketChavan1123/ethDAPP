(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[189],{92309:function(e,t,r){"use strict";r.r(t);var n=r(85893),s=r(87757),a=r.n(s),i=r(92137),c=r(6610),u=r(5991),o=r(63349),l=r(65255),d=r(86089),h=r(77608),p=r(96156),f=r(67294),v=r(48237),g=r(81420),Z=r(60416),x=r(68788),b=r(57603),j=r(24579),y=r(61483),m=r(66456);function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,h.Z)(e);if(t){var s=(0,h.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,d.Z)(this,r)}}var _=function(e){(0,l.Z)(r,e);var t=w(r);function r(){var e;(0,c.Z)(this,r);for(var n=arguments.length,s=new Array(n),u=0;u<n;u++)s[u]=arguments[u];return e=t.call.apply(t,[this].concat(s)),(0,p.Z)((0,o.Z)(e),"state",{value:"",description:"",recipient:"",errorMsg:"",loading:!1,disabled:!1}),(0,p.Z)((0,o.Z)(e),"onSubmit",function(){var t=(0,i.Z)(a().mark((function t(r){var n,s,i,c,u,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.preventDefault(),e.setState({loading:!0,errorMsg:"",disabled:!0}),n=(0,j.Z)(e.props.address),s=e.state,i=s.description,c=s.value,u=s.recipient,t.prev=4,t.next=7,y.Z.eth.getAccounts();case 7:return o=t.sent,t.next=10,n.methods.createRequest(i,y.Z.utils.toWei(c,"ether"),u).send({from:o[0]});case 10:m.Router.replaceRoute("/campaigns/".concat(e.props.address,"/requests")),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),e.setState({errorMsg:t.t0.message});case 16:e.setState({loading:!1,disabled:!1});case 17:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e){return t.apply(this,arguments)}}()),e}return(0,u.Z)(r,[{key:"render",value:function(){var e=this;return(0,n.jsxs)(b.Z,{children:[(0,n.jsx)(m.Link,{route:"/campaigns/".concat(this.props.address,"/requests"),children:(0,n.jsx)("a",{children:(0,n.jsx)(v.Z,{secondary:!0,children:" Back"})})}),(0,n.jsx)("h3",{children:"Create a Request for your Campaign"}),(0,n.jsxs)(g.Z,{onSubmit:this.onSubmit,error:!!this.state.errorMsg,children:[(0,n.jsxs)(g.Z.Field,{children:[(0,n.jsx)("label",{children:"Description"}),(0,n.jsx)(Z.Z,{value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}})]}),(0,n.jsxs)(g.Z.Field,{children:[(0,n.jsx)("label",{children:"Value in ether"}),(0,n.jsx)(Z.Z,{value:this.state.value,label:"ether",labelPosition:"right",onChange:function(t){return e.setState({value:t.target.value})}})]}),(0,n.jsxs)(g.Z.Field,{children:[(0,n.jsx)("label",{children:"Recipient"}),(0,n.jsx)(Z.Z,{value:this.state.recipient,onChange:function(t){return e.setState({recipient:t.target.value})}})]}),(0,n.jsx)(x.Z,{error:!0,header:"Oops!",content:this.state.errorMsg}),(0,n.jsx)(v.Z,{disabled:this.state.disabled,loading:this.state.loading,primary:!0,children:"Create"})]})]})}}],[{key:"getInitialProps",value:function(){var e=(0,i.Z)(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query.address,e.abrupt("return",{address:r});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(f.Component);t.default=_},76306:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests/new",function(){return r(92309)}])}},function(e){e.O(0,[774,141,685,336,888,179],(function(){return t=76306,e(e.s=t);var t}));var t=e.O();_N_E=t}]);