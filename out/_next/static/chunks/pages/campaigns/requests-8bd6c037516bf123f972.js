(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{96156:function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:function(){return n}})},74447:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return I}});var n=r(87757),s=r.n(n),a=r(92137),l=r(85893),c=r(6610),i=r(5991),o=r(65255),d=r(86089),u=r(77608),p=r(67294),f=r(57603),h=r(66456),v=r(22122),m=r(36744),Z=r(86010),g=(r(45697),r(92063)),x=r(28935),b=r(12519),w=r(92248);function y(e){var t=e.children,r=e.className,n=(0,Z.Z)(r),s=(0,x.Z)(y,e),a=(0,b.Z)(y,e);return p.createElement(a,(0,v.Z)({},s,{className:n}),t)}y.handledProps=["as","children","className"],y.defaultProps={as:"tbody"},y.propTypes={};var R=y,k=r(17186),j=r(65382);function G(e){var t=e.active,r=e.children,n=e.className,s=e.collapsing,a=e.content,l=e.disabled,c=e.error,i=e.icon,o=e.negative,d=e.positive,u=e.selectable,f=e.singleLine,h=e.textAlign,m=e.verticalAlign,y=e.warning,R=e.width,k=(0,Z.Z)((0,g.lG)(t,"active"),(0,g.lG)(s,"collapsing"),(0,g.lG)(l,"disabled"),(0,g.lG)(c,"error"),(0,g.lG)(o,"negative"),(0,g.lG)(d,"positive"),(0,g.lG)(u,"selectable"),(0,g.lG)(f,"single line"),(0,g.lG)(y,"warning"),(0,g.X4)(h),(0,g.Ok)(m),(0,g.H0)(R,"wide"),n),A=(0,x.Z)(G,e),N=(0,b.Z)(G,e);return w.kK(r)?p.createElement(N,(0,v.Z)({},A,{className:k}),j.Z.create(i),a):p.createElement(N,(0,v.Z)({},A,{className:k}),r)}G.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],G.defaultProps={as:"td"},G.propTypes={},G.create=(0,k.u5)(G,(function(e){return{content:e}}));var A=G;function N(e){var t=e.children,r=e.className,n=e.content,s=e.fullWidth,a=(0,Z.Z)((0,g.lG)(s,"full-width"),r),l=(0,x.Z)(N,e),c=(0,b.Z)(N,e);return p.createElement(c,(0,v.Z)({},l,{className:a}),w.kK(t)?n:t)}N.handledProps=["as","children","className","content","fullWidth"],N.defaultProps={as:"thead"},N.propTypes={};var P=N;function C(e){var t=e.as,r=(0,x.Z)(C,e);return p.createElement(P,(0,v.Z)({},r,{as:t}))}C.handledProps=["as"],C.propTypes={},C.defaultProps={as:"tfoot"};var q=C;function E(e){var t=e.as,r=e.className,n=e.sorted,s=(0,Z.Z)((0,g.cD)(n,"sorted"),r),a=(0,x.Z)(E,e);return p.createElement(A,(0,v.Z)({},a,{as:t,className:s}))}E.handledProps=["as","className","sorted"],E.propTypes={},E.defaultProps={as:"th"};var _=E;function D(e){var t=e.active,r=e.cellAs,n=e.cells,s=e.children,a=e.className,l=e.disabled,c=e.error,i=e.negative,o=e.positive,d=e.textAlign,u=e.verticalAlign,f=e.warning,h=(0,Z.Z)((0,g.lG)(t,"active"),(0,g.lG)(l,"disabled"),(0,g.lG)(c,"error"),(0,g.lG)(i,"negative"),(0,g.lG)(o,"positive"),(0,g.lG)(f,"warning"),(0,g.X4)(d),(0,g.Ok)(u),a),y=(0,x.Z)(D,e),R=(0,b.Z)(D,e);return w.kK(s)?p.createElement(R,(0,v.Z)({},y,{className:h}),(0,m.Z)(n,(function(e){return A.create(e,{defaultProps:{as:r}})}))):p.createElement(R,(0,v.Z)({},y,{className:h}),s)}D.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],D.defaultProps={as:"tr",cellAs:"td"},D.propTypes={},D.create=(0,k.u5)(D,(function(e){return{cells:e}}));var T=D;function z(e){var t=e.attached,r=e.basic,n=e.celled,s=e.children,a=e.className,l=e.collapsing,c=e.color,i=e.columns,o=e.compact,d=e.definition,u=e.fixed,f=e.footerRow,h=e.headerRow,y=e.headerRows,k=e.inverted,j=e.padded,G=e.renderBodyRow,A=e.selectable,N=e.singleLine,C=e.size,E=e.sortable,_=e.stackable,D=e.striped,H=e.structured,O=e.tableData,S=e.textAlign,F=e.unstackable,L=e.verticalAlign,X=(0,Z.Z)("ui",c,C,(0,g.lG)(n,"celled"),(0,g.lG)(l,"collapsing"),(0,g.lG)(d,"definition"),(0,g.lG)(u,"fixed"),(0,g.lG)(k,"inverted"),(0,g.lG)(A,"selectable"),(0,g.lG)(N,"single line"),(0,g.lG)(E,"sortable"),(0,g.lG)(_,"stackable"),(0,g.lG)(D,"striped"),(0,g.lG)(H,"structured"),(0,g.lG)(F,"unstackable"),(0,g.sU)(t,"attached"),(0,g.sU)(r,"basic"),(0,g.sU)(o,"compact"),(0,g.sU)(j,"padded"),(0,g.X4)(S),(0,g.Ok)(L),(0,g.H0)(i,"column"),"table",a),B=(0,x.Z)(z,e),K=(0,b.Z)(z,e);if(!w.kK(s))return p.createElement(K,(0,v.Z)({},B,{className:X}),s);var U={defaultProps:{cellAs:"th"}},I=(h||y)&&p.createElement(P,null,T.create(h,U),(0,m.Z)(y,(function(e){return T.create(e,U)})));return p.createElement(K,(0,v.Z)({},B,{className:X}),I,p.createElement(R,null,G&&(0,m.Z)(O,(function(e,t){return T.create(G(e,t))}))),f&&p.createElement(q,null,T.create(f)))}z.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],z.defaultProps={as:"table"},z.propTypes={},z.Body=R,z.Cell=A,z.Footer=q,z.Header=P,z.HeaderCell=_,z.Row=T;var H=z,O=r(48237),S=r(24579),F=r(63349),L=r(96156),X=r(61483);function B(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var s=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,d.Z)(this,r)}}var K=function(e){(0,o.Z)(r,e);var t=B(r);function r(){var e;(0,c.Z)(this,r);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return e=t.call.apply(t,[this].concat(l)),(0,L.Z)((0,F.Z)(e),"state",{loading:!1,disabled:!1}),(0,L.Z)((0,F.Z)(e),"onApprove",(0,a.Z)(s().mark((function t(){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0,errorMsg:"",disabled:!0}),t.prev=1,r=(0,S.Z)(e.props.address),t.next=5,X.Z.eth.getAccounts();case 5:return n=t.sent,t.next=8,r.methods.approveRequest(e.props.id).send({from:n[0]});case 8:h.Router.replaceRoute("/campaigns/".concat(e.props.address,"/requests")),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:e.setState({loading:!1,disabled:!1});case 15:case"end":return t.stop()}}),t,null,[[1,11]])})))),(0,L.Z)((0,F.Z)(e),"onFinalize",(0,a.Z)(s().mark((function t(){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0,errorMsg:"",disabled:!0}),t.prev=1,r=(0,S.Z)(e.props.address),t.next=5,X.Z.eth.getAccounts();case 5:return n=t.sent,t.next=8,r.methods.finalizeRequest(e.props.id).send({from:n[0]});case 8:h.Router.replaceRoute("/campaigns/".concat(e.props.address,"/requests")),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:e.setState({loading:!1,disabled:!1});case 15:case"end":return t.stop()}}),t,null,[[1,11]])})))),e}return(0,i.Z)(r,[{key:"render",value:function(){var e=H.Row,t=H.Cell;return(0,l.jsxs)(e,{children:[(0,l.jsx)(t,{children:this.props.id}),(0,l.jsx)(t,{children:this.props.request.description}),(0,l.jsx)(t,{children:X.Z.utils.fromWei(this.props.request.value)}),(0,l.jsx)(t,{children:this.props.request.recipient}),(0,l.jsxs)(t,{children:[this.props.request.approvalCount,"/",this.props.approversCount]}),(0,l.jsx)(t,{children:(0,l.jsx)(O.Z,{disabled:this.state.disabled,loading:this.state.loading,onClick:this.onApprove,color:"green",basic:!0,children:"Approve"})}),(0,l.jsx)(t,{children:(0,l.jsx)(O.Z,{disabled:this.state.disabled,loading:this.state.loading,onClick:this.onFinalize,color:"red",basic:!0,children:"Finalize"})})]})}}]),r}(p.Component);function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=(0,u.Z)(e);if(t){var s=(0,u.Z)(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return(0,d.Z)(this,r)}}var I=function(e){(0,o.Z)(r,e);var t=U(r);function r(){return(0,c.Z)(this,r),t.apply(this,arguments)}return(0,i.Z)(r,[{key:"renderRow",value:function(){var e=this;return this.props.requests.map((function(t,r){return(0,l.jsx)(K,{id:r,request:t,address:e.props.address,approversCount:e.props.approversCount},r)}))}},{key:"render",value:function(){var e=H.Header,t=H.Row,r=H.HeaderCell,n=H.Body;return(0,l.jsxs)(f.Z,{children:[(0,l.jsx)("h3",{children:"Campaign Requests"}),(0,l.jsx)(h.Link,{route:"/campaigns/".concat(this.props.address,"/requests/new"),children:(0,l.jsx)("a",{children:(0,l.jsx)(O.Z,{primary:!0,children:"Add Request"})})}),(0,l.jsxs)(H,{children:[(0,l.jsx)(e,{children:(0,l.jsxs)(t,{children:[(0,l.jsx)(r,{children:"ID"}),(0,l.jsx)(r,{children:"Description"}),(0,l.jsx)(r,{children:"Amount"}),(0,l.jsx)(r,{children:"Recipient"}),(0,l.jsx)(r,{children:"Approval Count"}),(0,l.jsx)(r,{children:"Approve"}),(0,l.jsx)(r,{children:"Finalize"})]})}),(0,l.jsx)(n,{children:this.renderRow()})]})]})}}],[{key:"getInitialProps",value:function(){var e=(0,a.Z)(s().mark((function e(t){var r,n,a,l,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.query.address,n=(0,S.Z)(r),e.next=4,n.methods.gerRequestCount().call();case 4:return a=e.sent,e.next=7,n.methods.approversCount().call();case 7:return l=e.sent,e.next=10,Promise.all(Array(parseInt(a)).fill().map((function(e,t){return n.methods.requests(t).call()})));case 10:return c=e.sent,e.abrupt("return",{address:r,requests:c,requestCount:a,approversCount:l});case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),r}(p.Component)},19553:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return r(74447)}])}},function(e){e.O(0,[774,141,336,888,179],(function(){return t=19553,e(e.s=t);var t}));var t=e.O();_N_E=t}]);